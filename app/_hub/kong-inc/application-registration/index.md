---
name: Portal Application Registration
publisher: Kong Inc.
version: 1.5.x

desc: Self-service portal developer credentials against specific services.
description: |
  Applications allow registered developers on Kong Developer Portal to
  authenticate with OAuth against a Service on Kong. Admins can selectively
  admit access to Services using Kong Manager.

type: plugin
enterprise: true
categories:
  - authentication

kong_version_compatibility: # required
  #community_edition: # optional
    #compatible:
    #incompatible:
  enterprise_edition: # optional
    compatible:
    - 1.5.x

#########################
# PLUGIN-ONLY SETTINGS below this line
# If your extension is a plugin, ALL of the following lines must be completed.
# If NOT an plugin, delete all lines up to '# BEGIN MARKDOWN CONTENT'

params:
  name: application-registration
  service_id: true
  consumer_id: false
  route_id: false
  protocols: ["http", "https", "grpc", "grpcs"]
  dbless_compatible: no
    # Degree of compatibility with DB-less mode. Three values allowed:
    # 'yes', 'no' or 'partially'
  dbless_explanation:
    # Optional free-text explanation, usually containing details about the degree of
    # compatibility with DB-less.
  config:
    - name: config.auth_header_name
      required: false
      default: "`authorization`"
      description: |
        The name of the header that is supposed to carry the access token.
        Default: `authorization`.
    - name: config.auto_approve
      required: no
      default: false
      value_in_examples:
      description:
        If enabled, all new Service Contracts requests are automatically approved. Otherwise, Dev Portal admins must manually approve requests.  
    - name: config.description
      required: no
      default:
      value_in_examples:
      description:
        Description displayed in information about a Service in the Developer Portal.
    - name: config.display_name
      required: yes
      default:
      value_in_examples:
      description:
        Display name used for a Service in the Developer Portal.
    - name: config.enable_authorization_code
      required: false
      default: "`false`"
      value_in_examples: true
      description: |
        An optional boolean value to enable the three-legged Authorization
        Code flow ([RFC 6742 Section 4.1](https://tools.ietf.org/html/rfc6749#section-4.1)).
    - name: config.enable_client_credentials
      required: false
      default: "`false`"
      description: |
        An optional boolean value to enable the Client Credentials Grant
        flow ([RFC 6742 Section 4.4](https://tools.ietf.org/html/rfc6749#section-4.4)).
    - name: config.enable_implicit_grant
      required: false
      default: "`false`"
      description: |
        An optional boolean value to enable the Implicit Grant flow, which
        allows to provision a token as a result of the authorization
        process ([RFC 6742 Section 4.2](https://tools.ietf.org/html/rfc6749#section-4.2)).
    - name: config.enable_password_grant
      required: false
      default: "`false`"
      description: |
        An optional boolean value to enable the Resource Owner Password
        Credentials Grant flow ([RFC 6742 Section 4.3](https://tools.ietf.org/html/rfc6749#section-4.3)).
      - name: config.mandatory_scope
        required: yes
        default: "`false`"
        value_in_examples:
        description:
          An optional boolean value telling the plugin to require at least
          one scope to be authorized by the end user.
      - name: config.provision_key
        required: yes
        default: autogenerated
        value_in_examples:
        description:
          The Provision Key is automatically generated on creation. No input
          is required. Used by the Resource Owner Password Credentials Grant
          (Password Grant) flow.
      - name: config.refresh_token_ttl
        required: yes
        default: 1209600
        value_in_examples:
        description:
          An optional integer value telling the plugin how many seconds a
          token/refresh token pair is valid for, and can be used to generate
          a new access token. Default value is two weeks. Set to `0` to
          keep the token/refresh token pair indefinitely valid.
      - name: config.scopes
        required: semi
        default:
        value_in_examples:
        description:
          Describes an array of scope names that will be available to the
          end user.
      - name: config.token_expiration
        required: no
        default: 7200
        value_in_examples:
        description:
          An optional integer value telling the plugin how many seconds a token
          should last, after which the client will need to refresh the token.
          Set to `0` to disable the expiration.

  #  - name: # add additional setting blocks as needed, each demarcated by -
  extra:
    # This is for additional remarks about your configuration.
###############################################################################
# END YAML DATA
# Beneath the next --- use Markdown (redcarpet flavor) and HTML formatting only.
#
# The remainder of this file is for free-form description, instruction, and
# reference matter.
# If you include headers, your headers MUST start at Level 2 (parsing to
# h2 tag in HTML). Heading Level 2 is represented by ## notation
# preceding the header text. Subsequent headings,
# if you choose to use them, must be properly nested (eg. heading level 2 may
# be followed by another heading level 2, or by heading level 3, but must NOT be
# followed by heading level 4)
###############################################################################
# BEGIN MARKDOWN CONTENT
---

## Example: testing 123

When configuring the plugin, at least one of the following OAuth2
auth flows must be enabled:

- Authorization Code
- Client Credentials
- Implicit Grant
- Password Grant
